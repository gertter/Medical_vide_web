{% extends 'base.html' %}
{% block index %}
<title>发布视频</title>
<link href="/static/css/dashboard.css" rel="stylesheet" />
{% if error %}
    <script>
    alert('{{ error }}')
    </script>
    {% endif %}
<div class="page">
  <div class="page-main">
      <div class="header collapse d-lg-flex p-0" id="headerMenuCollapse">
      <div class="container">
        <div class="row align-items-center">
          <div class="col-lg order-lg-first">
            <ul class="nav nav-tabs border-0 flex-column flex-lg-row">
              <li class="nav-item dropdown">
                <a href="/manage_person_video/" class="nav-link" data-toggle="dropdown"><i class="fe fe-calendar"></i>我的视频</a>
              </li>
              <li class="nav-item">
                <a href="/publish_video/" class="nav-link  active" data-toggle="dropdown"><i class="fe fe-box"></i>我要发布</a>
              </li>

              <li class="nav-item dropdown">
                <a href="/doctor_info/" class="nav-link" data-toggle="dropdown"><i class="fe fe-file"></i>我的信息</a>
              </li>
                  <li class="nav-item">
                <a href="/logout/" class="nav-link"><i class="fe fe-file-text"></i>退出登录</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
        <div class="my-3 my-md-5">
          <div class="container">
            <div class="row">
              <div class="col-lg-12">
                <form method="post" class="card" enctype="multipart/form-data">
                    {% csrf_token %}
                  <div class="card-body">
                    <h3 class="card-title">发布视频</h3>
                    <div class="row">
                      <div class="col-md-5">
                        <div class="form-group">
                          <label class="form-label">视频标题</label>
                          <input name="title" type="text" class="form-control"  placeholder="The video title">
                        </div>
                      </div>
                      <div class="col-sm-6 col-md-3">
                        <div class="form-group">
                          <label class="form-label">点击上传视频</label>
                              <input style="" type="file" class="btn btn-primary" id="file" multiple="" name="file" onchange="img()">
                      </div>
                      </div>
                    <div class="col-sm-12">
                      <label class="form-label">视频预览位置</label>
                      <div id="imgt" style="text-align:center;border:1px #dfdfdf solid;width:80%;height: 500px">

                      </div>
                    </div>
                      <div class="col-sm-12">
                        <label class="form-label">视频介绍</label>
                         <textarea name="info" rows="5" class="form-control" placeholder="Here can be your video infomation"></textarea>
                      </div><br/>
                    </div>
                  </div>
                  <div class="card-footer text-center">
                    <button style="background: red;border: none;" type="submit" class="btn btn-primary">确定上传</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
<script>
function img() {
    var file = document.getElementById("file").files; //获取input file的文件对象
    for (var i = 0; i < file.length; i++) { //多图,单图不用for
        var url = URL.createObjectURL(file[i]); //获取所选文件的临时地址
        $("#imgt").html('<video width="658" height="444" src="'+url+'"  autoplay="autoplay"></video>');
    }
}
</script>
{% endblock %}